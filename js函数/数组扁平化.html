<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
    </head>
    <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.4.4/babel.min.js"></script>
        <script>
            //flat
            var arr = [1,2,3,[4,5,[6,7]]];
            console.log(arr.flat());//默认扁平化第一层
            console.log(arr.flat(2));
            console.log(arr.flat(Infinity));
            console.log(arr.flat());

            //map与flatmap
            var arr1 = [1,2,3,4];
            console.log(arr1.flatMap(x => [x * 2]));
            console.log(arr1.flatMap(x => [[x * 2]]));

            //depth扁平函数
            function flattenArr(arr, depth = 1){
                let res = [];
                //遍历每一项
                arr.forEach(v => {
                    //判断子项是否为数组，是否已达到指定深度
                    if(Array.isArray(v) && depth > 0){
                        //递归调用
                        res.push(...flattenArr(v, --depth));
                    }else{
                        res.push(v)
                    }
                    return res;
                })
            }
            var arr2 = [1,2,3,[4,5,[6,7,8,[9]]]];
            console.log(flattenArr(arr2,2))
        </script>
    </body>
</html>